# 🎯 핵심 키워드

---

<aside>
💡 주요 내용들에 대해 조사해보고, 자신만의 생각을 통해 정리해보세요!
레퍼런스를 참고하여 정의, 속성, 장단점 등을 적어주셔도 됩니다.
조사는 공식 홈페이지 **Best**, 블로그(최신 날짜) **Not Bad**

</aside>

- 외래키
  ### 1. 외래키 (Foreign Key)란?
  외래키는 두 테이블을 서로 **연결**하는 데 사용되는 키이다.
  외래키가 포함된 테이블을 자식 테이블이라고 하고 외래키 값을 제공하는 테이블을 부모 테이블이라한다.
  ### 2. 외래키 사용시 주의 사항
  1. 외래키 값은 **NULL**이거나 **부모 테이블의** **기본키 값**과 동일해야한다. (참조 무결성 제약조건)

  2. 부모 테이블의 기본키, 고유키를 외래키로 지정할 수 있다.

  3. 부모 테이블의 기본키, 고유키가 여러개의 컬럼으로 이루어져 있다면 부모가 가진 기본키, 고유키 컬럼을 원하는 개수만큼 묶어서 외래키로 지정할 수 있다.
  ```sql
  CREATE TABLE `parent` (
  	`id1` INT(11) NOT NULL,
  	`id2` INT(11) NOT NULL,
  	PRIMARY KEY (`id1`, `id2`),
  	);

  CREATE TABLE `child` (
  	`id` INT(11) NOT NULL,
  	`id1` INT(11) NOT NULL,
  	FOREIGN KEY (`id1`, `id2`) REFERENCES `parent` (`id1`, `id2`),
  	)
  	# FOREIGN KEY (컬럼명1, 컬럼명2..) REFERNCES 부모테이블명 (컬럼명1, 컬럼명2)
  ```
- 기본키
  ### PK의 특징
  1. 모든 레코드가 서로 다른 값을 가지고 있어 각 레코드를 식별할 수 있다.
  2. NULL값이 존재할 수 없다.
  3. 레코드의 값은 중복이 불가능하다.
  4. 테이블에는 하나의 기본키만 가질 수 있지만 경우에 따라 1개 이상의 기본키를 정의할 수도 있다. (다수 열 기본 키, 복합 기본 키)
  ### PK의 생성
  ```sql
  CREATE TABLE user {
  	id int PRIMARY KEY
     }
  ```
  - **AUTO_INCREMENT** 의 사용
    - PRIMARY KEY의 속성 중 하나
    - 삽입되는 레코드에 유니크한 값을 자동적으로 부여한다.
    - 일반적으로 1부터 증가하며 값을 부여하지만, 별도의 다른 값을 부여할 수도 있다.
- ER 다이어그램
  ### ERD(Entity Relationship Diagram)란?
  → ERD는 데이터베이스 구조를 한 눈에 알아보기 위해 그려놓는 다이어그램이다.
  (시스템의 Entity가 무엇이있고 어떤 관계가 있는지를 나타냄)
  ### ERD 표기법
  1. 개체(Entity)
     - 개체란 단독으로 존재하는 객체를 의미하며, 동일한 객체는 존재하지 않는다.
     - ERD에서는 개체를 "사각형"으로 표기한다.
  2. 속성 (Attribute)
     - 속성은 개체가 가지고 있는 속성을 의미한다.
     - ERD에서는 속성을 "원"으로 표기한다.
     - 속성 중 "기본키"는 속성에 밑줄을 그어 표기한다.
  3. 관계 (Relationship)
     - 관계는 개체 간의 관계를 의미한다.
     - ERD에선 개체를 서로 이으며 어떤 관계를 가지는지 "마름모"로 표기한다.
  4. 관계성 그리기 - 까치발 표기법

     ![image](https://github.com/user-attachments/assets/919a5504-6d7f-4115-b5e3-c8549252d597)

  위와 같이 개체와 속성을 추출하고, 관계를 설정한 다음 관계성까지 표현한다면
  **개념적 설계**가 마무리된다.
- 복합 키
  **복합키 (Composite Key)** 또는 **복합 기본키**는 두 개 이상의 칼럼으로 구성된 기본키를 의미
  이러한 키는 데이터베이스 테이블 내에서 레코드의 고유성을 보장하기위해 사용됩니다.
  ### 복합키의 유용함
  1. **데이터 무결성 보장**: 복합키를 사용하면, 한 테이블 내의 특정 칼럼 조합의 고유성을 보장할 수 있습니다. 이를 통해 데이터 중복을 방지하고 무결성을 유지할 수 있습니다.
  2. **정규화**: 복합키는 데이터베이스 설계의 정규화 과정에서 발생하는 테이블 간의 관계를 나타내는 데 유용하게 사용됩니다.
  ```sql
  -- 대여 정보 테이블 생성
  CREATE TABLE InternationalBookRental (
      libraryCode VARCHAR(10),
      bookCode VARCHAR(10),
      rentalDate DATE,
      returnDate DATE,

      PRIMARY KEY (libraryCode, bookCode) -- 복합키 설정
  );

  -- 대여 정보 입력 예시
  INSERT INTO InternationalBookRental (libraryCode, bookCode, rentalDate)
  VALUES ('LIB123', 'BK001', '2023-01-01');
  ```
  출처 : https://shin-e-dog.tistory.com/66
- 연관관계
  ### 연관 관계(Association)이란?
  연관관계란 두 개 이상의 테이블 간에 존재하는 관계
  ## 연관관계의 종류
  연관관계의 종류로는
  - 일 대 일 (1 to 1)
  - 일 대 다 (1 to N)
  - 다 대 일 (N to 1)
  - 다 대 다(N to M)
  ### ❗연관 관계 매핑시 고려사항
  1. 다중성
  → 연관 관계의 대상이 다수의 데이터를 보유할 수 있는 관계인지를 파악
  ex) 하나의 팀이 여러명의 선수를 가지는 관계
  \*헷갈릴 경우, 연관 관계의 대상의 입장에서 생각해보자.
  ex) 팀 → 선수는 OneToMany의 관계다. 선수 → 팀은 ManyToOne의 관계다.
  ⭐다대다(N:M) 관계는 사용하면 안되는 연관 관계다.
- 정규화
  ### 1. 정규화의 정의
  - 정규화는 하나의 테이블을 여러개로 분해하는 과정이다.
  - 갱신(삽입,삭제등)시 발생하는 이상현상을 해결하는 것.
    - 테이블 간에 중복된 데이터를 허용하지 않는다는 것 → 무결성(Integrity) 유지
  - 이 과정은 함수적 종속성의 특징에 따라 이루어진다.
  ### 2. 정규화의 단계
  - 1정규형(1NF)은 모든 속성이 **원자적**이어야 한다.
  - 2정규형(2NF)은 부분 함수적 종속이 없어야 한다.
    - 완전 함수 종속을 만족하도록 테이블을 분해하는 것
    예시)
    (전)
    ![image (1)](https://github.com/user-attachments/assets/c1898c16-f391-4ecb-8dc0-48d843ed6d7a)

    ```
    (학생번호, 강좌이름)으로 복합키이다. 그리고 (학생번호, 강좌이름)인 기본키는 성적을 결정하고 있다. (학생번호, 강좌이름) --> (성적)
    그런데 여기서 강의실이라는 컬럼은 기본키의 부분집합인 강좌이름에 의해 결정될 수 있다. (강좌이름) --> (강의실)
    즉, 기본키(학생번호, 강좌이름)의 부분키인 강좌이름이 결정자이기 때문에 위의 테이블의 경우 다음과 같이 기존의 테이블에서 **강의실을 분해**하여 별도의 테이블로 관리하여 제2 정규형을 만족시킬 수 있다.
    ```
    (후)
    ![image (2)](https://github.com/user-attachments/assets/76a26d36-16d1-4106-ba84-211b0bad6462)

  - 3정규형(3NF)은 이행적 함수적 종속이 없어야 한다.
    - 이행적 함수적 종속 : **A가 B를 결정하고, B가 C를 결정할 때, A가 C를 결정하는 관계**
      - A→B, B→C 성립
    ![image (3)](https://github.com/user-attachments/assets/8cea1515-eae5-4b39-ba67-196bf431dd91)

  - 보이스 코드 정규형(BCNF)은 모든 결정자가 후보 키여야 한다.
    ![image (4)](https://github.com/user-attachments/assets/4665151c-97aa-4a47-9915-10f82efe4d71)

  ### \*결정자란?
  - **X -> Y**의 관계를 갖는 속성 X와 Y에서
    X를 **결정자(Determinant)** / Y를 **종속자(Dependent)**라고 한다.
  ### 3. 정규화의 원리
  - 정규화는 데이터 구조의 안정성을 높이고, 삽입, 삭제, 갱신 이상의 발생을 줄인다.
  - 정규화를 통해 효율적인 데이터베이스 구조를 설계할 수 있다.
  출처 : https://mangkyu.tistory.com/110
  (다음 강의를 보시고 정리한 내용을 작성해주시면 됩니다.)
  [정보처리 실기*데이터베이스06강*정규화](https://youtu.be/RXQ1kZ_JHqg?si=f0OPsoOWnJXSbqca)
- 반 정규화
  ### 1. 반정규화란?
  정규화된 엔티티, 속성, 관계에 대해 시스템의 성능향상과 개발과 운영의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링의 기법
  ### 2. 반정규화를 수행하는 이유
  데이터를 조회할 때 조인으로 인한 성능저하가 예상될 때 성능이 저하될 것이 예상되는 경우 수행한다.
  ### 3. 반정규화 절차
  1. 반정규화 대상조사
     - 범위처리빈도수 조사
     - 대량의 범위 처리 조사
     - 통계성 프로세스 조사
     - 테이블 조인 개수
  2. 다른 방법유도 검토
     - 뷰(VIEW) 테이블
     - 클러스터링 적용
     - 인텍스의 조정
     - 응용 애플리케이션
  3. 반정규화 적용
     - 테이블 반정규화
     - 속성의 반정규화
     - 관계의 반정규화
  ## 4. 반정규화 기법
  ### 테이블 반정규화
  - `테이블 병합`
    - 1:1 관계 테이블 병합 : 1:1 관계를 통합하여 성능향상
    - 1:M 관계 테이블 병합 : 1:M 관계를 통합하여 성능향상
    - 슈퍼/서브타입 테이블병합 : 슈퍼/서브 관계를 통합하여 성능향상
  - `테이블 분할`
    - 수직분할 : 하나의 테이블의 속성을 분할하여 두 개 이상의 테이블로 분할
    - 수평분할 : 하나의 테이블에 있는 값을 기준으로 테이블을 분할
  - `테이블 추가`
    - 중복 테이블 추가 : 동일한 테이블 구조를 중복하여 원격조인을 제거
    - 통계 테이블 추가 : SUM, AVG 등을 미리 수행하여 계산
    - 이력 테이블 추가 : 마스터 테이블에서 자주 조회되는 레코드를 중복하여 테이블 추가
    - 부분 테이블 추가 : 자주 이용하는 칼럼을 모아놓은 별도의 테이블 추가
  ### 속성 반정규화
  - `중복 칼럼 추가` : 조인 감소를 위해 중복된 칼럼을 추가
  - `파생 칼럼 추가` : 미리 값을 계산하여 칼럼에 보관
  - `이력 테이블 칼럼 추가` : 대량의 이력 데이터를 처리할 때 기능성 칼럼(최근값 여부, 시작과 종료일자 등)을 추가
  - `PK에 의한 칼럼 추가` : 여러 칼럼으로 이루어진 PK를 가진 테이블을 조인할 경우 단순성을 위해서 인공키를 PK로 지정하고 활용
  - `응용시스템 오작동을 위한 칼럼 추가` : 이전 데이터를 임시적으로 중복하여 보관
  ### 관계 반정규화
  - `중복 관계 추가` : 여러 경로를 거쳐 조인 할 수 있지만, 성능 저하를 예방하기 위해 추가적인 관계를 맺음
  출처: https://velog.io/@dddooo9/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EB%B0%98%EC%A0%95%EA%B7%9C%ED%99%94

## 📢 학습 후기

---

- 이번 주차 워크북을 해결해보면서 어땠는지 회고해봅시다.
- 핵심 키워드에 대해 완벽하게 이해했는지? 혹시 이해가 안 되는 부분은 뭐였는지?

<aside>
💡 Entity를 만드는 기준과 Entity간의 관계를 정하는 것이 너무 어렵다.

![image](https://github.com/user-attachments/assets/8979ec16-7b1e-4b66-a3bc-c2cfeabbe006)


</aside>

## ⚠️ 스터디 진행 방법

---

1. 스터디를 진행하기 전, 워크북 내용들을 모두 채우고 스터디에서는 서로 모르는 내용들을 공유해주세요.
2. 미션은 워크북 내용들을 모두 완료하고 나서 스터디 전/후로 진행해보세요.
3. 다음주 스터디를 진행하기 전, 지난주 미션을 서로 공유해서 상호 피드백을 진행하시면 됩니다.

## ✅ 실습 체크리스트

---

- [x] 로컬 DB 설정
- [x] DB 접속

![image (5)](https://github.com/user-attachments/assets/5d605941-a6c2-42db-aa67-393279a04c67)

